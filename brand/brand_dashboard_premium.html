<!DOCTYPE html>
<html dir="rtl" lang="ar" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - UGC Maroc</title>
  
  <!-- Google Material Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;500;600;700" rel="stylesheet">
  
  <!-- Cairo Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            'primary-dark': '#4f46e5',
            'bg-light': '#f8fafc',
            'bg-dark': '#0f172a',
            'card-light': '#ffffff',
            'card-dark': '#1e293b',
          },
          fontFamily: {
            sans: ['Cairo', 'system-ui', 'sans-serif'],
          },
        },
      },
    };
  </script>

  <style>
    /* Smooth Animations */
    .fade-in {
      animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Hover Effects */
    .hover-lift {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .hover-lift:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px -10px rgba(99, 102, 241, 0.3);
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 12px;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from { transform: translate(-50%, -100px); opacity: 0; }
      to { transform: translate(-50%, 0); opacity: 1; }
    }

    @keyframes slideUp {
      from { transform: translate(-50%, 0); opacity: 1; }
      to { transform: translate(-50%, -100px); opacity: 0; }
    }

    .toast.success { border-right: 4px solid #10b981; }
    .toast.error { border-right: 4px solid #ef4444; }
    .toast.info { border-right: 4px solid #3b82f6; }

    /* Skeleton Loader */
    .skeleton {
      background: linear-gradient(90deg, #e2e8f0 25%, #cbd5e1 50%, #e2e8f0 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    ::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }
  </style>
</head>

<body class="bg-bg-light dark:bg-bg-dark text-gray-900 dark:text-gray-100 transition-colors min-h-screen">

  <!-- ===== HEADER ===== -->
  <header class="sticky top-0 z-50 bg-white/80 dark:bg-card-dark/80 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        
        <!-- Logo -->
        <a href="/brand/brand_dashboard_premium.html" class="flex items-center gap-3 group">
          <div class="w-10 h-10 bg-gradient-to-br from-primary to-purple-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
            <span class="text-white font-bold text-xl">U</span>
          </div>
          <span class="font-bold text-xl hidden sm:block">UGC Maroc</span>
        </a>

        <!-- Wallet Widget + Profile -->
        <div class="flex items-center gap-4">
          <!-- Wallet -->
          <div onclick="openWalletModal()" class="hidden md:flex items-center gap-3 bg-gradient-to-r from-primary/10 to-purple-500/10 dark:from-primary/20 dark:to-purple-500/20 px-4 py-2 rounded-full border border-primary/20 cursor-pointer hover:from-primary/15 hover:to-purple-500/15 transition-all">
            <span class="material-symbols-outlined text-primary">account_balance_wallet</span>
            <div class="text-left">
              <div class="text-xs text-gray-500 dark:text-gray-400">Ø§Ù„Ø±ØµÙŠØ¯</div>
              <div class="font-bold" id="header-balance">0 Ø¯.Ù…</div>
            </div>
            <button onclick="event.stopPropagation(); openAddFundsModal()" class="text-primary hover:text-primary-dark transition-colors">
              <span class="material-symbols-outlined text-sm">add_circle</span>
            </button>
          </div>

          <!-- Notifications -->
          <button class="relative p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
            <span class="material-symbols-outlined">notifications</span>
            <span class="absolute top-1 left-1 w-2 h-2 bg-red-500 rounded-full"></span>
          </button>

          <!-- Profile Dropdown -->
          <div class="relative" id="profile-dropdown">
            <button onclick="toggleProfileMenu()" class="flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
              <div class="w-8 h-8 bg-gradient-to-br from-primary to-purple-600 rounded-full flex items-center justify-center">
                <span class="material-symbols-outlined text-white text-sm">business</span>
              </div>
              <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>

            <!-- Dropdown Menu -->
            <div id="profile-menu" class="hidden absolute left-0 mt-2 w-64 bg-white dark:bg-card-dark rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2">
              <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700">
                <div class="font-semibold" id="brand-name">Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©</div>
                <div class="text-sm text-gray-500" id="brand-email">email@example.com</div>
              </div>
              <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined text-gray-500">settings</span>
                <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
              </a>
              <a href="#" class="flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined text-gray-500">help</span>
                <span>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</span>
              </a>
              <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                <span class="material-symbols-outlined">logout</span>
                <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Welcome Section -->
    <div class="mb-8 fade-in">
      <h1 class="text-3xl font-bold mb-2">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ ğŸ‘‹</h1>
      <p class="text-gray-600 dark:text-gray-400">Ø¥Ù„ÙŠÙƒ Ù…Ù„Ø®Øµ Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ÙŠÙˆÙ…</p>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <!-- Stat Card 1: Active Campaigns -->
      <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover-lift">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
            <span class="material-symbols-outlined text-blue-600 dark:text-blue-400">campaign</span>
          </div>
          <span class="text-xs text-gray-500">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</span>
        </div>
        <div class="text-3xl font-bold mb-1" id="stat-campaigns">0</div>
        <div class="text-sm text-gray-600 dark:text-gray-400">Ø­Ù…Ù„Ø§Øª Ù†Ø´Ø·Ø©</div>
      </div>

      <!-- Stat Card 2: Creators Engaged -->
      <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover-lift">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center">
            <span class="material-symbols-outlined text-purple-600 dark:text-purple-400">group</span>
          </div>
          <span class="text-xs text-gray-500">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
        </div>
        <div class="text-3xl font-bold mb-1" id="stat-creators">0</div>
        <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø¨Ø¯Ø¹ÙˆÙ† Ù…ØªØ¹Ø§ÙˆÙ†ÙˆÙ†</div>
      </div>

      <!-- Stat Card 3: Budget Spent -->
      <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover-lift">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
            <span class="material-symbols-outlined text-green-600 dark:text-green-400">payments</span>
          </div>
          <span class="text-xs text-gray-500">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</span>
        </div>
        <div class="text-3xl font-bold mb-1" id="stat-budget">0</div>
        <div class="text-sm text-gray-600 dark:text-gray-400">Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù…Ù†ÙÙ‚Ø© (Ø¯.Ù…)</div>
      </div>

      <!-- Stat Card 4: ROI -->
      <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover-lift">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-xl flex items-center justify-center">
            <span class="material-symbols-outlined text-amber-600 dark:text-amber-400">trending_up</span>
          </div>
          <span class="text-xs text-green-600">+12%</span>
        </div>
        <div class="text-3xl font-bold mb-1">156%</div>
        <div class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mb-8">
      <h2 class="text-xl font-bold mb-4">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
        
        <!-- Action 1: Create Campaign with AI -->
        <a href="/brand/create-campaign-wizard.html" class="group bg-gradient-to-br from-primary to-purple-600 text-white rounded-2xl p-6 text-right hover-lift block">
          <div class="flex items-center justify-between mb-3">
            <span class="material-symbols-outlined text-3xl">auto_awesome</span>
            <span class="text-xs bg-white/20 px-2 py-1 rounded-full">AI</span>
          </div>
          <div class="font-bold text-lg mb-1">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø©</div>
          <div class="text-sm text-white/80">Ù…Ø¹ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
        </a>

        <!-- Action 2: Search Creators -->
        <button onclick="scrollToCreatorsSearch()" class="group bg-white dark:bg-card-dark border-2 border-gray-200 dark:border-gray-700 rounded-2xl p-6 text-right hover-lift hover:border-primary">
          <span class="material-symbols-outlined text-3xl text-primary mb-3 block">search</span>
          <div class="font-bold text-lg mb-1">Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¨Ø¯Ø¹ÙŠÙ†</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Ø§ÙƒØªØ´Ù Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ÙŠÙ†</div>
        </button>

        <!-- Action 3: Manage Funds -->
        <button onclick="openWalletModal()" class="group bg-white dark:bg-card-dark border-2 border-gray-200 dark:border-gray-700 rounded-2xl p-6 text-right hover-lift hover:border-green-500">
          <span class="material-symbols-outlined text-3xl text-green-600 mb-3 block">account_balance_wallet</span>
          <div class="font-bold text-lg mb-1">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø­ÙØ¸ØªÙƒ ÙˆØ§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</div>
        </button>

        <!-- Action 4: My Campaigns -->
        <button onclick="scrollToMyCampaigns()" class="group bg-white dark:bg-card-dark border-2 border-gray-200 dark:border-gray-700 rounded-2xl p-6 text-right hover-lift hover:border-blue-500">
          <span class="material-symbols-outlined text-3xl text-blue-600 mb-3 block">campaign</span>
          <div class="font-bold text-lg mb-1">Ø­Ù…Ù„Ø§ØªÙŠ</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
        </button>

        <!-- Action 5: Messages -->
        <button class="group bg-white dark:bg-card-dark border-2 border-gray-200 dark:border-gray-700 rounded-2xl p-6 text-right hover-lift hover:border-purple-500">
          <div class="flex items-center justify-between mb-3">
            <span class="material-symbols-outlined text-3xl text-purple-600">mail</span>
            <span class="text-xs bg-red-500 text-white px-2 py-1 rounded-full">3</span>
          </div>
          <div class="font-bold text-lg mb-1">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†</div>
        </button>
      </div>
    </div>

    <!-- Search Creators Section -->
    <div id="creators-search-section" class="mb-8">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠÙŠÙ†</h2>
        <button class="text-sm text-primary hover:text-primary-dark flex items-center gap-1">
          <span>Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…</span>
          <span class="material-symbols-outlined text-sm">tune</span>
        </button>
      </div>

      <!-- Search Bar with Filters -->
      <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 mb-4">
        <div class="flex flex-col lg:flex-row gap-4">
          <!-- Main Search -->
          <div class="flex-1 relative">
            <span class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">search</span>
            <input 
              id="creators-search-input"
              type="text" 
              placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„ÙØ¦Ø©ØŒ Ø£Ùˆ Ø§Ù„Ù…ÙˆÙ‚Ø¹..." 
              class="w-full h-12 pr-12 pl-4 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary focus:border-primary"
            />
          </div>

          <!-- Category Filter -->
          <select class="h-12 px-4 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary focus:border-primary">
            <option value="">ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª</option>
            <option value="beauty">Ø§Ù„Ø¬Ù…Ø§Ù„</option>
            <option value="fashion">Ø§Ù„Ù…ÙˆØ¶Ø©</option>
            <option value="tech">Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</option>
            <option value="food">Ø§Ù„Ø·Ø¹Ø§Ù…</option>
            <option value="travel">Ø§Ù„Ø³ÙØ±</option>
          </select>

          <!-- AI Match Button -->
          <button class="h-12 px-6 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2">
            <span class="material-symbols-outlined">auto_awesome</span>
            <span>Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span>
          </button>
        </div>
      </div>

      <!-- Creators Grid -->
      <div id="creators-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Skeleton Loaders -->
        <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 bg-gray-300 dark:bg-gray-700 rounded-full skeleton"></div>
            <div class="flex-1">
              <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2 w-3/4"></div>
              <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-1/2"></div>
            </div>
          </div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-5/6"></div>
        </div>
        <!-- More skeleton cards... -->
        <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 bg-gray-300 dark:bg-gray-700 rounded-full skeleton"></div>
            <div class="flex-1">
              <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2 w-3/4"></div>
              <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-1/2"></div>
            </div>
          </div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-5/6"></div>
        </div>
        <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-16 h-16 bg-gray-300 dark:bg-gray-700 rounded-full skeleton"></div>
            <div class="flex-1">
              <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2 w-3/4"></div>
              <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-1/2"></div>
            </div>
          </div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-5/6"></div>
        </div>
      </div>
    </div>

    <!-- My Campaigns Section -->
    <div id="my-campaigns-section" class="mb-8">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold">Ø­Ù…Ù„Ø§ØªÙŠ</h2>
        <div class="flex items-center gap-2">
          <button class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg" onclick="toggleCampaignsView('grid')">
            <span class="material-symbols-outlined text-sm">grid_view</span>
          </button>
          <button class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg" onclick="toggleCampaignsView('list')">
            <span class="material-symbols-outlined text-sm">view_list</span>
          </button>
        </div>
      </div>

      <!-- Campaigns Grid/List -->
      <div id="campaigns-container" class="grid grid-cols-1 lg:grid-cols-2 gap-4">
        <!-- Campaign cards will be loaded here -->
        <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800">
          <div class="h-4 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-4 w-3/4"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton mb-2"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-700 rounded skeleton w-5/6"></div>
        </div>
      </div>
    </div>

  </main>

  <!-- ===== MODALS ===== -->

  <!-- Wallet Modal -->
  <div id="wallet-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" onclick="if(event.target === this) closeWalletModal()">
    <div class="bg-white dark:bg-card-dark rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="sticky top-0 bg-white dark:bg-card-dark border-b border-gray-200 dark:border-gray-800 px-6 py-4 flex items-center justify-between">
        <h3 class="text-xl font-bold">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ù„</h3>
        <button onclick="closeWalletModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="p-6">
        <!-- Wallet content here -->
        <div class="bg-gradient-to-br from-primary to-purple-600 rounded-2xl p-6 text-white mb-6">
          <div class="text-sm opacity-80 mb-2">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
          <div class="text-4xl font-bold mb-4" id="modal-balance">0 Ø¯.Ù…</div>
          <button onclick="openAddFundsModal()" class="bg-white text-primary px-6 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-colors">
            Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯
          </button>
        </div>
        
        <h4 class="font-bold mb-4">Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h4>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-xl">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center">
                <span class="material-symbols-outlined text-red-600 text-sm">arrow_downward</span>
              </div>
              <div>
                <div class="font-semibold">Ø¯ÙØ¹ Ù„Ø­Ù…Ù„Ø© "Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ¬Ù…ÙŠÙ„"</div>
                <div class="text-sm text-gray-500">Ù…Ù†Ø° ÙŠÙˆÙ…ÙŠÙ†</div>
              </div>
            </div>
            <div class="text-red-600 font-bold">-450 Ø¯.Ù…</div>
          </div>
          
          <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-xl">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center">
                <span class="material-symbols-outlined text-green-600 text-sm">arrow_upward</span>
              </div>
              <div>
                <div class="font-semibold">Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</div>
                <div class="text-sm text-gray-500">Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…</div>
              </div>
            </div>
            <div class="text-green-600 font-bold">+2000 Ø¯.Ù…</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Campaign Modal -->
  <div id="create-campaign-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" onclick="if(event.target === this) closeCreateCampaignModal()">
    <div class="bg-white dark:bg-card-dark rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
      <div class="sticky top-0 bg-white dark:bg-card-dark border-b border-gray-200 dark:border-gray-800 px-6 py-4 flex items-center justify-between">
        <div>
          <h3 class="text-xl font-bold">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
          <p class="text-sm text-gray-500">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
        </div>
        <button onclick="closeCreateCampaignModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="p-6">
        <form id="create-campaign-form" class="space-y-6">
          <!-- Step 1: Basic Info -->
          <div>
            <label class="block text-sm font-semibold mb-2">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù…Ù„Ø© *</label>
            <input type="text" id="campaign-title" required class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary" placeholder="Ù…Ø«Ø§Ù„: Ø­Ù…Ù„Ø© ØªØ±ÙˆÙŠØ¬ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø©">
          </div>

          <div>
            <label class="block text-sm font-semibold mb-2">ÙˆØµÙ Ø§Ù„Ø­Ù…Ù„Ø©</label>
            <textarea rows="4" id="campaign-description" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary" placeholder="ØµÙ Ù…Ø§ ØªØ±ÙŠØ¯ ØªØ­Ù‚ÙŠÙ‚Ù‡ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø­Ù…Ù„Ø©..."></textarea>
            <button type="button" id="generate-desc-btn" onclick="generateCampaignDescription()" class="mt-2 text-sm text-primary hover:text-primary-dark flex items-center gap-1 transition-colors">
              <span class="material-symbols-outlined text-sm">auto_awesome</span>
              <span id="generate-desc-text">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span>
            </button>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-2">Ø§Ù„ÙØ¦Ø© *</label>
              <select id="campaign-category" required class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                <option value="beauty">Ø§Ù„Ø¬Ù…Ø§Ù„</option>
                <option value="fashion">Ø§Ù„Ù…ÙˆØ¶Ø©</option>
                <option value="tech">Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</option>
                <option value="food">Ø§Ù„Ø·Ø¹Ø§Ù…</option>
                <option value="travel">Ø§Ù„Ø³ÙØ±</option>
                <option value="other">Ø£Ø®Ø±Ù‰</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2">Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (Ø¯.Ù…) *</label>
              <input type="number" id="campaign-budget" required min="100" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary" placeholder="500">
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-2">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label>
              <input type="date" id="campaign-deadline" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-2">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</label>
              <select id="campaign-difficulty" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary">
                <option value="beginner">Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†</option>
                <option value="intermediate" selected>Ù…ØªÙˆØ³Ø·</option>
                <option value="expert">Ø®Ø¨ÙŠØ±</option>
              </select>
            </div>
          </div>

          <div class="flex gap-3">
            <button type="button" onclick="closeCreateCampaignModal()" class="flex-1 px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-xl font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
              Ø¥Ù„ØºØ§Ø¡
            </button>
            <button type="submit" id="submit-campaign-btn" class="flex-1 px-6 py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all">
              <span id="submit-campaign-text">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add Funds Modal -->
  <div id="add-funds-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" onclick="if(event.target === this) closeAddFundsModal()">
    <div class="bg-white dark:bg-card-dark rounded-2xl max-w-md w-full" onclick="event.stopPropagation()">
      <div class="border-b border-gray-200 dark:border-gray-800 px-6 py-4 flex items-center justify-between">
        <h3 class="text-xl font-bold">Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯</h3>
        <button onclick="closeAddFundsModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="p-6">
        <form id="add-funds-form" class="space-y-6" enctype="multipart/form-data">
          <div>
            <label class="block text-sm font-semibold mb-2">Ø§Ù„Ù…Ø¨Ù„Øº (Ø¯.Ù…) *</label>
            <input type="number" id="funds-amount" required min="50" step="10" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary" placeholder="500">
            <p class="text-xs text-gray-500 mt-1">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰: 50 Ø¯.Ù…</p>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-2">Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (ÙˆØµÙ„ Ø£Ùˆ ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ) *</label>
            <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center hover:border-primary transition-colors cursor-pointer" onclick="document.getElementById('receipt-upload').click()">
              <input type="file" id="receipt-upload" accept="image/*,.pdf" required class="hidden">
              <div id="upload-placeholder">
                <span class="material-symbols-outlined text-4xl text-gray-400 mb-2">upload_file</span>
                <p class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ Ø§Ù„ÙˆØµÙ„ Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡ Ù‡Ù†Ø§</p>
                <p class="text-xs text-gray-500 mt-1">PNG, JPG, PDF (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 5MB)</p>
              </div>
              <div id="upload-preview" class="hidden">
                <span class="material-symbols-outlined text-4xl text-green-600 mb-2">check_circle</span>
                <p class="text-sm font-semibold text-green-600" id="filename-display"></p>
                <button type="button" onclick="clearReceipt(event)" class="text-xs text-red-600 hover:underline mt-2">Ø¥Ø²Ø§Ù„Ø©</button>
              </div>
            </div>
          </div>

          <div class="bg-gray-50 dark:bg-gray-900 rounded-xl p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:</span>
              <span class="font-bold" id="current-balance-add">0 Ø¯.Ù…</span>
            </div>
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm text-gray-600 dark:text-gray-400">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¶Ø§Ù:</span>
              <span class="font-bold text-primary" id="adding-amount">0 Ø¯.Ù…</span>
            </div>
            <div class="border-t border-gray-300 dark:border-gray-700 pt-2 mt-2">
              <div class="flex items-center justify-between">
                <span class="font-semibold">Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:</span>
                <span class="font-bold text-lg text-orange-600" id="new-balance-preview">0 Ø¯.Ù…</span>
              </div>
            </div>
            <p class="text-xs text-orange-600 mt-2 flex items-center gap-1">
              <span class="material-symbols-outlined text-sm">schedule</span>
              Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØµÙ„ (24-48 Ø³Ø§Ø¹Ø©)
            </p>
          </div>

          <div class="flex gap-3">
            <button type="button" onclick="closeAddFundsModal()" class="flex-1 px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-xl font-semibold hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
              Ø¥Ù„ØºØ§Ø¡
            </button>
            <button type="submit" id="confirm-add-funds-btn" class="flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all">
              <span id="confirm-add-funds-text">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ===== SCRIPTS ===== -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/js/config.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/ai-assistant.js"></script>

  <script>
    // Global State
    let currentUser = null;
    let brandProfile = null;
    let wallet = null;

    // Get Auth Headers with Supabase Token
    async function getAuthHeaders(includeContentType = true) {
      const { data: { session } } = await window.supabaseClient.auth.getSession();
      const headers = {};
      
      if (session?.access_token) {
        headers['Authorization'] = `Bearer ${session.access_token}`;
      }
      
      if (includeContentType) {
        headers['Content-Type'] = 'application/json';
      }
      
      return headers;
    }

    // Toast Notifications
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      const icons = {
        success: 'check_circle',
        error: 'error',
        info: 'info'
      };
      
      toast.innerHTML = `
        <span class="material-symbols-outlined">${icons[type]}</span>
        <span>${message}</span>
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideDown 0.3s ease-out reverse';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Profile Dropdown
    function toggleProfileMenu() {
      const menu = document.getElementById('profile-menu');
      menu.classList.toggle('hidden');
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      const dropdown = document.getElementById('profile-dropdown');
      if (!dropdown.contains(e.target)) {
        document.getElementById('profile-menu').classList.add('hidden');
      }
    });

    // Modal Functions
    function openWalletModal() {
      document.getElementById('wallet-modal').classList.remove('hidden');
    }

    function closeWalletModal() {
      document.getElementById('wallet-modal').classList.add('hidden');
    }

    function openCreateCampaignModal() {
      document.getElementById('create-campaign-modal').classList.remove('hidden');
    }

    function closeCreateCampaignModal() {
      document.getElementById('create-campaign-modal').classList.add('hidden');
      // Reset form
      document.getElementById('create-campaign-form').reset();
    }

    function openAddFundsModal() {
      const modal = document.getElementById('add-funds-modal');
      modal.classList.remove('hidden');
      
      // Update current balance display
      const currentBalance = wallet ? wallet.balance : 0;
      document.getElementById('current-balance-add').textContent = `${currentBalance.toFixed(2)} Ø¯.Ù…`;
      
      // Reset form
      document.getElementById('add-funds-form').reset();
      document.getElementById('adding-amount').textContent = '0 Ø¯.Ù…';
      document.getElementById('new-balance-preview').textContent = `${currentBalance.toFixed(2)} Ø¯.Ù…`;
    }

    function closeAddFundsModal() {
      document.getElementById('add-funds-modal').classList.add('hidden');
    }

    // Update new balance preview as user types
    document.addEventListener('DOMContentLoaded', () => {
      const fundsInput = document.getElementById('funds-amount');
      if (fundsInput) {
        fundsInput.addEventListener('input', (e) => {
          const amount = parseFloat(e.target.value) || 0;
          const currentBalance = wallet ? wallet.balance : 0;
          const newBalance = currentBalance + amount;
          
          document.getElementById('adding-amount').textContent = `${amount.toFixed(2)} Ø¯.Ù…`;
          document.getElementById('new-balance-preview').textContent = `${newBalance.toFixed(2)} Ø¯.Ù…`;
        });
      }
    });

    // Generate Campaign Description with AI (auto-detect language)
    async function generateCampaignDescription() {
      const titleInput = document.getElementById('campaign-title');
      const descriptionInput = document.getElementById('campaign-description');
      const generateBtn = document.getElementById('generate-desc-btn');
      const generateText = document.getElementById('generate-desc-text');
      
      const title = titleInput.value.trim();
      
      if (!title) {
        showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ù…Ù„Ø© Ø£ÙˆÙ„Ø§Ù‹', 'error');
        titleInput.focus();
        return;
      }

      // Show loading state
      generateBtn.disabled = true;
      generateText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...';
      
      try {
        const headers = await getAuthHeaders();
        const response = await fetch(`${window.API_BASE_URL}/api/ai/generate-description`, {
          method: 'POST',
          headers: headers,
          body: JSON.stringify({ title })
        });

        const data = await response.json();

        if (data.success) {
          descriptionInput.value = data.description;
          showToast('ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØµÙ Ø¨Ù†Ø¬Ø§Ø­! âœ¨', 'success');
        } else {
          showToast(data.message || 'ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØµÙ', 'error');
        }
      } catch (error) {
        console.error('Error generating description:', error);
        showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØµÙ', 'error');
      } finally {
        // Reset button state
        generateBtn.disabled = false;
        generateText.textContent = 'ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ';
      }
    }

    // Submit Campaign Form
    document.addEventListener('DOMContentLoaded', () => {
      const createCampaignForm = document.getElementById('create-campaign-form');
      if (createCampaignForm) {
        createCampaignForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const submitBtn = document.getElementById('submit-campaign-btn');
          const submitText = document.getElementById('submit-campaign-text');
          
          // Get form data
          const title = document.getElementById('campaign-title').value.trim();
          const description = document.getElementById('campaign-description').value.trim();
          const category = document.getElementById('campaign-category').value;
          const budget = document.getElementById('campaign-budget').value;
          const deadline = document.getElementById('campaign-deadline').value;
          const difficulty = document.getElementById('campaign-difficulty').value;

          // Validation
          if (!title || !category || !budget || parseFloat(budget) < 100) {
            showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
            return;
          }

          // Show loading state
          submitBtn.disabled = true;
          submitText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...';

          try {
            const headers = await getAuthHeaders();
            const response = await fetch(`${window.API_BASE_URL}/api/campaigns`, {
              method: 'POST',
              headers: headers,
              body: JSON.stringify({
                title,
                description: description || null,
                category,
                budget: parseFloat(budget),
                deadline: deadline || null,
                difficulty,
                content_type: 'video',
                brand_id: currentUser.id
              })
            });

            const data = await response.json();

            if (data.success) {
              closeCreateCampaignModal();
              showElegantNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ¨', data.campaign);
              await refreshCampaigns();
            } else {
              showToast(data.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©', 'error');
            }
          } catch (error) {
            console.error('Error creating campaign:', error);
            showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©', 'error');
          } finally {
            submitBtn.disabled = false;
            submitText.textContent = 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©';
          }
        });
      }
    });

    // Receipt Upload Handling
    function clearReceipt(event) {
      event.stopPropagation();
      document.getElementById('receipt-upload').value = '';
      document.getElementById('upload-placeholder').classList.remove('hidden');
      document.getElementById('upload-preview').classList.add('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const receiptInput = document.getElementById('receipt-upload');
      if (receiptInput) {
        receiptInput.addEventListener('change', (e) => {
          const file = e.target.files[0];
          if (file) {
            // Validate file size (5MB max)
            if (file.size > 5 * 1024 * 1024) {
              showToast('Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5MB', 'error');
              e.target.value = '';
              return;
            }
            
            // Show preview
            document.getElementById('upload-placeholder').classList.add('hidden');
            document.getElementById('upload-preview').classList.remove('hidden');
            document.getElementById('filename-display').textContent = file.name;
          }
        });
      }
    });

    // Add Funds Form with Receipt Upload
    document.addEventListener('DOMContentLoaded', () => {
      const addFundsForm = document.getElementById('add-funds-form');
      if (addFundsForm) {
        addFundsForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const confirmBtn = document.getElementById('confirm-add-funds-btn');
          const confirmText = document.getElementById('confirm-add-funds-text');
          const amount = parseFloat(document.getElementById('funds-amount').value);
          const receiptFile = document.getElementById('receipt-upload').files[0];

          if (!amount || amount < 50) {
            showToast('Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 50 Ø¯.Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
            return;
          }

          if (!receiptFile) {
            showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹', 'error');
            return;
          }

          // Show loading state
          confirmBtn.disabled = true;
          confirmText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

          try {
            const formData = new FormData();
            formData.append('user_id', currentUser.id);
            formData.append('amount', amount);
            formData.append('receipt', receiptFile);

            const headers = await getAuthHeaders(false); // Don't include Content-Type for FormData
            const response = await fetch(`${window.API_BASE_URL}/api/wallet/add-funds`, {
              method: 'POST',
              headers: headers,
              body: formData
            });

            const data = await response.json();

            if (data.success) {
              closeAddFundsModal();
              showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø© âœ¨', 'success');
              await refreshWallet();
            } else {
              showToast(data.message || 'ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨', 'error');
            }
          } catch (error) {
            console.error('Error adding funds:', error);
            showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨', 'error');
          } finally {
            confirmBtn.disabled = false;
            confirmText.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨';
          }
        });
      }
    });

    // Refresh Campaigns
    async function refreshCampaigns() {
      if (!currentUser) return;
      await loadCampaigns();
    }

    // Refresh Wallet
    async function refreshWallet() {
      if (!currentUser) return;
      await loadWallet();
    }

    // Elegant Notification System
    function showElegantNotification(message, campaign = null) {
      // Remove existing notification if any
      const existing = document.getElementById('elegant-notification');
      if (existing) existing.remove();

      const notification = document.createElement('div');
      notification.id = 'elegant-notification';
      notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] animate-slideDown';
      
      notification.innerHTML = `
        <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-2xl shadow-2xl p-6 text-white max-w-md" style="backdrop-filter: blur(10px);">
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center animate-bounce">
                <span class="material-symbols-outlined text-3xl">check_circle</span>
              </div>
            </div>
            <div class="flex-1">
              <h4 class="font-bold text-lg mb-1">${message}</h4>
              ${campaign ? `<p class="text-sm opacity-90 mb-3">${campaign.title}</p>` : ''}
              <div class="flex gap-2 mt-3">
                ${campaign ? `<button onclick="viewCampaign(${campaign.id})" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-colors">Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù…Ù„Ø©</button>` : ''}
                <button onclick="closeElegantNotification()" class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-colors">Ø­Ø³Ù†Ø§Ù‹</button>
              </div>
            </div>
            <button onclick="closeElegantNotification()" class="flex-shrink-0 p-1 hover:bg-white/20 rounded-lg transition-colors">
              <span class="material-symbols-outlined text-xl">close</span>
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      // Auto-dismiss after 5 seconds
      setTimeout(() => {
        closeElegantNotification();
      }, 5000);
    }

    function closeElegantNotification() {
      const notification = document.getElementById('elegant-notification');
      if (notification) {
        notification.style.animation = 'slideUp 0.3s ease-out';
        setTimeout(() => notification.remove(), 300);
      }
    }

    function viewCampaign(campaignId) {
      closeElegantNotification();
      scrollToMyCampaigns();
    }

    // Scroll Functions
    function scrollToCreatorsSearch() {
      document.getElementById('creators-search-section').scrollIntoView({ behavior: 'smooth' });
    }

    function scrollToMyCampaigns() {
      document.getElementById('my-campaigns-section').scrollIntoView({ behavior: 'smooth' });
    }

    // Toggle Campaigns View
    function toggleCampaignsView(view) {
      // Implementation for grid/list view toggle
      console.log('Toggle view:', view);
    }

    // Logout
    async function logout() {
      try {
        await window.auth.logoutUser();
        window.location.href = '/auth/brand-login.html';
      } catch (error) {
        showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'error');
      }
    }

    // Initialize Dashboard
    async function initDashboard() {
      try {
        // Get current user
        const { data: { user } } = await window.supabaseClient.auth.getUser();
        
        if (!user) {
          window.location.href = '/auth/brand-login.html';
          return;
        }

        currentUser = user;

        // Load profile
        const profileResponse = await fetch(`${window.API_BASE_URL}/api/profile/${user.id}`);
        const profileData = await profileResponse.json();
        
        if (profileData.success) {
          brandProfile = profileData.profile;
          
          // Update UI
          document.getElementById('brand-name').textContent = brandProfile.full_name || 'Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©';
          document.getElementById('brand-email').textContent = user.email;
        }

        // Load wallet
        await loadWallet();

        // Load campaigns
        await loadCampaigns();

        // Load creators
        await loadCreators();

        console.log('âœ… Dashboard initialized');
      } catch (error) {
        console.error('Error initializing dashboard:', error);
        showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', 'error');
      }
    }

    // Load Wallet
    async function loadWallet() {
      try {
        const response = await fetch(`${window.API_BASE_URL}/api/wallet/${currentUser.id}`);
        const data = await response.json();
        
        if (data.success) {
          wallet = data.wallet;
          const balance = parseFloat(wallet.balance || 0).toFixed(2);
          document.getElementById('header-balance').textContent = `${balance} Ø¯.Ù…`;
          document.getElementById('modal-balance').textContent = `${balance} Ø¯.Ù…`;
        }
      } catch (error) {
        console.error('Error loading wallet:', error);
      }
    }

    // Load Campaigns
    async function loadCampaigns() {
      try {
        const headers = await getAuthHeaders();
        const response = await fetch(`${window.API_BASE_URL}/api/campaigns/brand/${currentUser.id}`, {
          headers: headers
        });
        const data = await response.json();
        
        if (data.success) {
          const campaigns = data.campaigns || [];
          
          // Update stats
          const activeCampaigns = campaigns.filter(c => c.status === 'active');
          document.getElementById('stat-campaigns').textContent = activeCampaigns.length;
          
          // Calculate total budget spent
          const totalBudget = campaigns.reduce((sum, c) => sum + parseFloat(c.budget || 0), 0);
          document.getElementById('stat-budget').textContent = totalBudget.toFixed(0);
          
          // Display campaigns
          displayCampaigns(campaigns);
        }
      } catch (error) {
        console.error('Error loading campaigns:', error);
      }
    }

    // Display Campaigns
    function displayCampaigns(campaigns) {
      const container = document.getElementById('campaigns-container');
      
      if (campaigns.length === 0) {
        container.innerHTML = `
          <div class="col-span-full text-center py-12">
            <span class="material-symbols-outlined text-6xl text-gray-400 mb-4">campaign</span>
            <p class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù…Ù„Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
            <button onclick="openCreateCampaignModal()" class="mt-4 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary-dark">
              Ø¥Ù†Ø´Ø§Ø¡ Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </button>
          </div>
        `;
        return;
      }

      container.innerHTML = campaigns.map(campaign => `
        <div class="bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover-lift">
          <div class="flex items-start justify-between mb-4">
            <div>
              <h3 class="font-bold text-lg mb-1">${campaign.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2">${campaign.description || ''}</p>
            </div>
            <span class="px-3 py-1 rounded-full text-xs font-semibold ${
              campaign.status === 'active' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' : 
              campaign.status === 'draft' ? 'bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400' :
              'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400'
            }">
              ${campaign.status === 'active' ? 'Ù†Ø´Ø·Ø©' : campaign.status === 'draft' ? 'Ù…Ø³ÙˆØ¯Ø©' : 'Ù…Ù†ØªÙ‡ÙŠØ©'}
            </span>
          </div>
          
          <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4">
            <div class="flex items-center gap-1">
              <span class="material-symbols-outlined text-sm">payments</span>
              <span>${campaign.budget} Ø¯.Ù…</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="material-symbols-outlined text-sm">schedule</span>
              <span>${new Date(campaign.deadline).toLocaleDateString('ar-MA')}</span>
            </div>
          </div>
          
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors">
              Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
            </button>
            <button class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">
              <span class="material-symbols-outlined text-sm">more_vert</span>
            </button>
          </div>
        </div>
      `).join('');
    }

    // Load Creators
    async function loadCreators() {
      try {
        // Placeholder for now - will implement API endpoint
        const creatorsGrid = document.getElementById('creators-grid');
        
        // Show sample creator cards
        creatorsGrid.innerHTML = `
          <div class="col-span-full text-center py-12">
            <span class="material-symbols-outlined text-6xl text-gray-400 mb-4">group</span>
            <p class="text-gray-500 mb-4">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ÙŠÙ†</p>
          </div>
        `;
      } catch (error) {
        console.error('Error loading creators:', error);
      }
    }

    // Handle Create Campaign Form
    document.getElementById('create-campaign-form')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      showToast('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø©...', 'info');
      
      // TODO: Implement campaign creation
      setTimeout(() => {
        showToast('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        closeCreateCampaignModal();
        loadCampaigns();
      }, 1500);
    });

    // Initialize when Supabase is ready
    if (window.supabaseClient) {
      initDashboard();
    } else {
      window.addEventListener('supabaseReady', initDashboard);
    }
  </script>

  <script src="/js/nav-links.js"></script>
  <script src="/js/dark-mode-toggle.js"></script>
</body>
</html>
